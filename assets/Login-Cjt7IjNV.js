import{r as s,u as e,a,b as r,j as o,L as i}from"./index-ByAoKMyo.js";import{u as l}from"./index.esm-D1F7Yd0O.js";const t=()=>{const{register:t,handleSubmit:n,formState:{errors:d}}=l(),[m,c]=s.useState(""),[u,h]=s.useState(!1),{login:p}=e(),g=a(),j=r(),x=j.state?.from?.pathname||"/dashboard";console.log("Login component rendered");return o.jsx("div",{className:"auth-container",children:o.jsxs("div",{className:"auth-card",children:[o.jsx("h2",{children:"Login to EasyGestion"}),o.jsxs("form",{onSubmit:n(async s=>{console.log("Login form submitted with data:",{email:s.email,password:"***"}),h(!0),c("");const e=await p(s.email,s.password);h(!1),e.success?(console.log("Login successful, navigating to:",x),g(x,{replace:!0})):(console.log("Login failed with error:",e.error),c(e.error))}),className:"auth-form",children:[o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"email",children:"Email"}),o.jsx("input",{type:"email",id:"email",autoComplete:"email",...t("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}}),className:d.email?"error":""}),d.email&&o.jsx("span",{className:"error-message",children:d.email.message})]}),o.jsxs("div",{className:"form-group",children:[o.jsx("label",{htmlFor:"password",children:"Password"}),o.jsx("input",{type:"password",id:"password",autoComplete:"current-password",...t("password",{required:"Password is required"}),className:d.password?"error":""}),d.password&&o.jsx("span",{className:"error-message",children:d.password.message})]}),m&&o.jsx("div",{className:"error-message",children:m}),o.jsx("button",{type:"submit",disabled:u,className:"auth-button",children:u?"Logging in...":"Login"})]}),o.jsxs("p",{className:"auth-link",children:["Don't have an account? ",o.jsx(i,{to:"/register",children:"Register here"})]})]})})};export{t as default};
