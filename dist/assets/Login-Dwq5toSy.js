import{jsx as e,jsxs as r}from"react/jsx-runtime";import{useState as a}from"react";import{useForm as s}from"react-hook-form";import{useNavigate as i,useLocation as o,Link as t}from"react-router-dom";import{u as m}from"../main.js";import"react-dom/client";import"axios";const l=()=>{const{register:l,handleSubmit:d,formState:{errors:n}}=s(),[c,p]=a(""),[u,h]=a(!1),{login:g}=m(),f=i(),w=o(),N=w.state?.from?.pathname||"/dashboard";return e("div",{className:"auth-container",children:r("div",{className:"auth-card",children:[e("h2",{children:"Login to EasyGestion"}),r("form",{onSubmit:d(async e=>{h(!0),p("");const r=await g(e.email,e.password);h(!1),r.success?f(N,{replace:!0}):p(r.error)}),className:"auth-form",children:[r("div",{className:"form-group",children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{type:"email",id:"email",autoComplete:"email",...l("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}}),className:n.email?"error":""}),n.email&&e("span",{className:"error-message",children:n.email.message})]}),r("div",{className:"form-group",children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{type:"password",id:"password",autoComplete:"current-password",...l("password",{required:"Password is required"}),className:n.password?"error":""}),n.password&&e("span",{className:"error-message",children:n.password.message})]}),c&&e("div",{className:"error-message",children:c}),e("button",{type:"submit",disabled:u,className:"auth-button",children:u?"Logging in...":"Login"})]}),r("p",{className:"auth-link",children:["Don't have an account? ",e(t,{to:"/register",children:"Register here"})]})]})})};export{l as default};
