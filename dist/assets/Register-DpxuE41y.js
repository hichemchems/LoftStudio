import{jsx as e,jsxs as a}from"react/jsx-runtime";import{useState as r}from"react";import{useForm as s}from"react-hook-form";import{useNavigate as m,Link as o}from"react-router-dom";import{u as l}from"../main.js";import"react-dom/client";import"axios";const n=()=>{const{register:n,handleSubmit:i,formState:{errors:t},watch:d}=s(),[c,u]=r(""),[h,p]=r(!1),{register:g}=l(),w=m(),f=d("password");return e("div",{className:"auth-container",children:a("div",{className:"auth-card",children:[e("h2",{children:"Register for Loft Barber"}),a("form",{onSubmit:i(async e=>{p(!0),u("");const a=await g({username:e.username,email:e.email,password:e.password,name:e.name,role:e.role||"user"});p(!1),a.success?w("/dashboard"):u(a.error)}),className:"auth-form",children:[a("div",{className:"form-group",children:[e("label",{htmlFor:"username",children:"Username"}),e("input",{type:"text",id:"username",autoComplete:"username",...n("username",{required:"Username is required",minLength:{value:3,message:"Username must be at least 3 characters"},maxLength:{value:50,message:"Username must be less than 50 characters"},pattern:{value:/^[a-zA-Z0-9_]+$/,message:"Username can only contain letters, numbers, and underscores"}}),className:t.username?"error":""}),t.username&&e("span",{className:"error-message",children:t.username.message})]}),a("div",{className:"form-group",children:[e("label",{htmlFor:"email",children:"Email"}),e("input",{type:"email",id:"email",autoComplete:"email",...n("email",{required:"Email is required",pattern:{value:/^\S+@\S+$/i,message:"Invalid email address"}}),className:t.email?"error":""}),t.email&&e("span",{className:"error-message",children:t.email.message})]}),a("div",{className:"form-group",children:[e("label",{htmlFor:"name",children:"Full Name"}),e("input",{type:"text",id:"name",autoComplete:"name",...n("name",{required:"Full name is required",minLength:{value:2,message:"Name must be at least 2 characters"},maxLength:{value:100,message:"Name must be less than 100 characters"}}),className:t.name?"error":""}),t.name&&e("span",{className:"error-message",children:t.name.message})]}),a("div",{className:"form-group",children:[e("label",{htmlFor:"password",children:"Password"}),e("input",{type:"password",id:"password",autoComplete:"new-password",...n("password",{required:"Password is required",minLength:{value:14,message:"Password must be at least 14 characters"},pattern:{value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[@$!%*?&])[A-Za-z\d@$!%*?&]/,message:"Password must contain uppercase, lowercase, number, and special character"}}),className:t.password?"error":""}),t.password&&e("span",{className:"error-message",children:t.password.message})]}),a("div",{className:"form-group",children:[e("label",{htmlFor:"confirmPassword",children:"Confirm Password"}),e("input",{type:"password",id:"confirmPassword",autoComplete:"new-password",...n("confirmPassword",{required:"Please confirm your password",validate:e=>e===f||"Passwords do not match"}),className:t.confirmPassword?"error":""}),t.confirmPassword&&e("span",{className:"error-message",children:t.confirmPassword.message})]}),a("div",{className:"form-group",children:[e("label",{htmlFor:"role",children:"Role"}),a("select",{id:"role",...n("role"),defaultValue:"user",children:[e("option",{value:"user",children:"User"}),e("option",{value:"admin",children:"Admin"})]})]}),c&&e("div",{className:"error-message",children:c}),e("button",{type:"submit",disabled:h,className:"auth-button",children:h?"Registering...":"Register"})]}),a("p",{className:"auth-link",children:["Already have an account? ",e(o,{to:"/login",children:"Login here"})]})]})})};export{n as default};
